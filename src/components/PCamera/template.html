<div class="wapper">
  <main class="main">
    <section class="camera camera-full">
      <!-- view port -->
      <div class="viewport">
        <!-- camera contents -->
        <canvas></canvas>
        <video autoplay playsinline></video>
        <canvas class="image-buffer"></canvas>
      </div>
    </section>

    <!-- cover-->
    <section class="cover" :class="compCoverShow ? 'cover-loading' : ''">
      <div
        class="position-relative"
        style="width: 100%; height: 100%"
        v-show="compCoverShow"
      >
        <div class="position-absolute top-50 start-50 translate-middle">
          <div
            class="spinner-border"
            role="status"
            style="width: 3rem; height: 3rem"
          >
            <span class="visually-hidden">Loading...</span>
          </div>
          <template v-if="ui.state === 'paused'">
            <p>ビデオキャプチャを取得中...</p>
          </template>
          <template v-if="ui.state === 'stoped'">
            <p>ビデオを停止中...</p>
          </template>
          <template v-else>
            <p>カメラの権限を確認中...</p>
          </template>
        </div>
      </div>
    </section>

    <!-- camera menu -->
    <nav class="camera-menu fixed-top m-0 p-0">
      <ul class="nav display-5">
        <!-- close button-->
        <li class="nav-item">
          <slot name="close-button">
            <button class="nav-link" @click="close">
              <i class="bi bi-x-square"></i>
            </button>
          </slot>
        </li>

        <!-- aspect ratio-->
        <li class="nav-item dropdown">
          <button
            class="nav-link fw-normal"
            data-bs-toggle="dropdown"
            data-bs-display="static"
            role="button"
            aria-expanded="false"
          >
            <i class="bi bi-aspect-ratio"></i>
            <span
              class="position-absolute top-50 start-50 translate-middle fs-6"
              >{{ `${ui.settings.aspectRatio}` }}</span
            >
          </button>
          <ul
            class="dropdown-menu dropdown-menu-start dropdown-menu-lg-start dropdown-menu-dark"
          >
            <li>
              <button
                class="dropdown-item"
                data-aspect-ratio="16/9"
                @click="doClickChangeAspectRatio"
              >
                <i class="bi bi-aspect-ratio"></i> 16/9
              </button>
            </li>
            <li>
              <button
                class="dropdown-item"
                data-aspect-ratio="4/3"
                @click="doClickChangeAspectRatio"
              >
                <i class="bi bi-aspect-ratio"></i> 4/3
              </button>
            </li>
            <li>
              <button
                class="dropdown-item"
                data-aspect-ratio="1/1"
                @click="doClickChangeAspectRatio"
              >
                <i class="bi bi-aspect-ratio"></i> 1/1
              </button>
            </li>
          </ul>
        </li>

        <li class="nav-item">
          <button class="nav-link" type="button" @click="doClickFacingMode">
            <i class="bi bi-phone-flip"></i>
          </button>
        </li>
      </ul>
    </nav>
    <!-- /camera menu -->

    <section class="fixed-bottom">
      <slot name="start-button">
        <button class="btn btn-primary" @click="start">
          <i class="bi bi-caret-right-square"></i>
        </button>
      </slot>
      <slot name="pause-button">
        <button class="btn btn-warning" @click="pause">
          <i class="bi bi-pause-circle"></i>
        </button>
      </slot>
      <slot name="stop-button">
        <button class="btn btn-danger" @click="stop">
          <i class="bi bi-stop-fill"></i>
        </button>
      </slot>
    </section>
  </main>
</div>
