(self["webpackChunkinput_file_capture_demo"]=self["webpackChunkinput_file_capture_demo"]||[]).push([[680,85],{3278:function(e){const t={DOM:{target:".viewport"},CONSTRAINS:{video:{width:1280,height:720}}};e.exports=(e=t.DOM.target,a=t.CONSTRAINS)=>{const n={target:e,viewport:null,video:null,canvas:null},s=e=>{let t;t=e?"string"===typeof e?document.querySelector(e):e:document.querySelector(".viewport");let a=t.querySelector("canvas");a||(a=t.createElement("canvas"),t.appendChild(a));let s=t.querySelector("video");s||(s=document.createElement("video"),t.appendChild(s)),n.viewport=t,n.canvas=a,n.video=s},r={stream:null,videoTrack:null},o=async e=>{try{const t=await navigator.mediaDevices.getUserMedia(e);r.stream=t;const{video:a,canvas:s}=n;return a.srcObject=t,t.getVideoTracks().forEach((e=>{r.videoTrack=e;const t=e.getSettings();s.width=t.width,s.height=t.height})),t}catch(t){return Promise.reject(t)}},i=(e,t)=>{const a=t.getContext("2d"),n={w:Math.floor(t.width),h:Math.floor(t.height)};a.clearRect(0,0,n.w,n.h),a.drawImage(e,0,0,n.w,n.h)},l={pause:!1},c=async()=>{try{let{stream:e}=r;return e||(e=await o(a)),e&&(l.pause=!1,e.getVideoTracks().forEach((e=>{e.enabled=!0})),requestAnimationFrame(p)),Promise.resolve(r.stream)}catch(e){return Promise.reject(e)}},u=async()=>{try{const{stream:e}=r;return e&&(l.pause=!0,e.getVideoTracks().forEach((e=>{e.enabled=!1}))),Promise.resolve(e)}catch(e){return Promise.reject(e)}},d=async()=>{try{const{stream:e}=r;return e&&(e.getTracks().forEach((e=>{e.enabled=!0,e.stop()})),r.stream=null,l.pause=!1),Promise.resolve(e)}catch(e){return Promise.reject(e)}},p=()=>{if(!l.pause){const{video:e,canvas:t}=n;i(e,t),setTimeout(requestAnimationFrame(p),1e3/30)}};return{get DOM(){return n},async init(){return new Promise((t=>(s(e),t(this))))},async start(){return await c()},async pause(){return await u()},async stop(){return await d()}}}},2999:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var n=a(3396),s=a(7139),r=a(9242);const o=e=>((0,n.dD)("data-v-3ae02e9c"),e=e(),(0,n.Cn)(),e),i={class:"wapper"},l={class:"main"},c=o((()=>(0,n._)("section",{class:"camera camera-full"},[(0,n._)("div",{class:"viewport"},[(0,n._)("canvas"),(0,n._)("video",{autoplay:"",playsinline:""})])],-1))),u={class:"position-relative",style:{width:"100%",height:"100%"}},d=o((()=>(0,n._)("div",{class:"position-absolute top-50 start-50 translate-middle"},[(0,n._)("div",{class:"spinner-border",role:"status",style:{width:"3rem",height:"3rem"}},[(0,n._)("span",{class:"visually-hidden"},"Loading...")]),(0,n._)("p",null,"カメラの権限を確認中...")],-1))),p=[d],v={class:"fixed-top d-flex flex-row"},m=o((()=>(0,n._)("i",{class:"bi bi-x-square"},null,-1))),b=[m],h={class:"fixed-bottom"},f=o((()=>(0,n._)("i",{class:"bi bi-caret-right-square"},null,-1))),w=[f],_=o((()=>(0,n._)("i",{class:"bi bi-pause-circle"},null,-1))),C=[_],g=o((()=>(0,n._)("i",{class:"bi bi-stop-fill"},null,-1))),k=[g];function y(e,t){return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("main",l,[c,(0,n._)("section",{class:(0,s.C_)(["cover",e.ui.loaded?"":"cover-loading"])},[(0,n.wy)((0,n._)("div",u,p,512),[[r.F8,!e.ui.loaded]])],2),(0,n._)("section",v,[(0,n.WI)(e.$slots,"close-button",{},(()=>[(0,n._)("button",{class:"btn btn-dark",onClick:t[0]||(t[0]=(...t)=>e.close&&e.close(...t))},b)]),!0)]),(0,n._)("section",h,[(0,n.WI)(e.$slots,"start-button",{},(()=>[(0,n._)("button",{class:"btn btn-primary",onClick:t[1]||(t[1]=(...t)=>e.start&&e.start(...t))},w)]),!0),(0,n.WI)(e.$slots,"pause-button",{},(()=>[(0,n._)("button",{class:"btn btn-warning",onClick:t[2]||(t[2]=(...t)=>e.pause&&e.pause(...t))},C)]),!0),(0,n.WI)(e.$slots,"stop-button",{},(()=>[(0,n._)("button",{class:"btn btn-danger",onClick:t[3]||(t[3]=(...t)=>e.stop&&e.stop(...t))},k)]),!0)])])])}var P=a(4870),D=a(6542),S=a(3278),I=a.n(S);const q=(e,t)=>{const a=(0,D.tv)(),s=(0,P.iH)({instance:null}),r=(0,P.qj)({loaded:!1,error:""}),o=e=>{e&&e.preventDefault(),a.back()},i=e=>{e&&e.preventDefault();const a=s.value.instance;return a.start().then((e=>(console.log("start"),r.loaded=!0,t.emit("start",{data:a}),e))).catch((e=>(console.error(e),r.error=e,e)))},l=e=>{e&&e.preventDefault();const a=s.value.instance;return a.pause().then((e=>(t.emit("pause",{data:a}),e)))},c=e=>{e&&e.preventDefault(),r.loaded=!1;const a=s.value.instance;return a.stop().then((e=>(t.emit("stop",{data:a}),e)))};return(0,n.bv)((()=>{const e=s.value.instance=I()(".viewport",{video:{width:{min:160,ideal:1200,max:10240},height:{min:120,ideal:720,max:4320},facingMode:"environment"}});e.init().then((()=>{t.emit("init",{data:e})}))})),(0,n.Ah)((()=>{c()})),{ui:r,close:o,start:i,pause:l,stop:c}};var x=(0,n.aZ)({name:"p-camera",setup:q}),T=a(89);const M=(0,T.Z)(x,[["render",y],["__scopeId","data-v-3ae02e9c"]]);var j=M},2991:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return _}});var n=a(3396),s=a(9242);const r={class:"container-fluid"},o=(0,n._)("i",{class:"bi bi-arrow-left fs-1"},null,-1),i=[o],l=(0,n._)("span",null,null,-1),c=(0,n._)("i",{class:"bi bi-stop-circle fs-1"},null,-1),u=[c],d=(0,n._)("span",null,null,-1);function p(e,t,a,o,c,p){const v=(0,n.up)("PCameraVue");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("form",null,[(0,n._)("div",null,[(0,n._)("div",null,[(0,n._)("button",{class:"btn btn-secondary",onClick:t[0]||(t[0]=(...t)=>e.doClickCamera&&e.doClickCamera(...t))}," Camera ")])]),(0,n.wy)((0,n.Wm)(v,{ref:"refCamera",onInit:e.emitedInit,onPause:e.emitedPause,onStop:e.emitedStop},{"close-button":(0,n.w5)((()=>[(0,n._)("button",{class:"btn btn-dark btn-lg",onClick:t[1]||(t[1]=(...t)=>e.doClickClose&&e.doClickClose(...t))},i)])),"start-button":(0,n.w5)((()=>[l])),"pause-button":(0,n.w5)((()=>[(0,n._)("button",{class:"btn btn-danger btn-lg",onClick:t[2]||(t[2]=(...t)=>e.doClickPause&&e.doClickPause(...t))},u)])),"stop-button":(0,n.w5)((()=>[d])),_:1},8,["onInit","onPause","onStop"]),[[s.F8,e.ui.show]])])])}var v=a(4870),m=a(2999);const b=function(){const e=(0,v.iH)(),t=(0,v.iH)({show:!1,camera:null}),a=e=>{t.value.camera=e.data},n=()=>{},s=()=>{t.value.show=!1},r=a=>{a&&a.preventDefault(),t.value.show=!1,e.value.stop()},o=t=>{t&&t.preventDefault(),e.value.stop()},i=a=>{a&&a.preventDefault(),t.value.show=!0,e.value.start()};return{refCamera:e,ui:t,emitedInit:a,emitedPause:n,emitedStop:s,doClickClose:r,doClickPause:o,doClickCamera:i}};var h=(0,n.aZ)({name:"p-input-form",components:{PCameraVue:m["default"]},setup:b}),f=a(89);const w=(0,f.Z)(h,[["render",p]]);var _=w}}]);
//# sourceMappingURL=form.a4f782ca.js.map