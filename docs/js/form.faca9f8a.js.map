{"version":3,"file":"js/form.faca9f8a.js","mappings":"oRACOA,MAAM,mB,GAGAA,MAAM,I,GAMNA,MAAM,oBAAoBC,MAAA,uB,oDA+B3BC,EAAAA,EAAAA,GAAgC,KAA7BF,MAAM,oBAAkB,W,GAA3BG,G,UAI0BD,EAAAA,EAAAA,GAAQ,uB,UAIlCA,EAAAA,EAAAA,GAAsC,KAAnCF,MAAM,0BAAwB,W,GAAjCI,G,UAIyBF,EAAAA,EAAAA,GAAQ,uB,yEApD3CG,EAAAA,EAAAA,IAuDM,MAvDNC,EAuDM,EAtDJJ,EAAAA,EAAAA,GAqDO,cApDLA,EAAAA,EAAAA,GA2BM,aA1BJA,EAAAA,EAAAA,GAIM,MAJNK,EAIM,EAHJL,EAAAA,EAAAA,GAES,UAFDF,MAAM,oBAAqBQ,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAC,eAAAD,EAAAC,iBAAAF,KAAe,eAK3DR,EAAAA,EAAAA,GAmBM,MAnBNW,EAmBM,gBAlBJR,EAAAA,EAAAA,IAiBWS,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAjBsBJ,EAAAK,GAAGC,QAAM,CAAxBC,EAAOC,M,WACvBd,EAAAA,EAAAA,IAeM,O,IAhB0Cc,EAC3CnB,MAAM,O,EACTE,EAAAA,EAAAA,GAYM,OAXJF,MAAM,gBACLQ,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAS,cAAAT,EAAAS,gBAAAV,IACP,WAAUS,EACV,aAAYD,EAAMG,MAClB,cAAaH,EAAMI,OACnBrB,OAAKsB,EAAAA,EAAAA,IAAA,wBAA0BL,EAAMM,S,EAEtCtB,EAAAA,EAAAA,GAGO,OAFLF,MAAM,oBACLC,OAAKsB,EAAAA,EAAAA,IAAA,wBAA0BL,EAAMM,eAAeN,EAAMG,mBAAmBH,EAAMI,c,gBAGxFpB,EAAAA,EAAAA,GAAmD,YAAAuB,EAAAA,EAAAA,IAAA,GAAxCP,EAAMG,WAAWH,EAAMI,UAAM,Q,oBAMhDI,EAAAA,EAAAA,IAsBaC,EAAA,CArBXC,IAAI,YAEHC,OAAMlB,EAAAmB,WACNC,QAAOpB,EAAAqB,YACPC,OAAMtB,EAAAuB,Y,CAEU,gBAAYC,EAAAA,EAAAA,KAC3B,IAES,EAFTjC,EAAAA,EAAAA,GAES,UAFDF,MAAM,WAAYQ,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAAyB,cAAAzB,EAAAyB,gBAAA1B,K,MAKlB,gBAAYyB,EAAAA,EAAAA,KAAC,IAAQ,CAARE,KAEb,gBAAYF,EAAAA,EAAAA,KAC3B,IAES,EAFTjC,EAAAA,EAAAA,GAES,UAFDF,MAAM,wBAAyBQ,QAAKC,EAAA,KAAAA,EAAA,OAAAC,IAAEC,EAAA2B,cAAA3B,EAAA2B,gBAAA5B,K,MAK/B,eAAWyB,EAAAA,EAAAA,KAAC,IAAQ,CAARI,K,6CAnBrB5B,EAAAK,GAAGwB,W,iCAoDnB,MAAMC,EAAQ,WAEZ,MAAMC,GAAYd,EAAAA,EAAAA,MAEZZ,GAAK2B,EAAAA,EAAAA,IAAS,CAClBH,MAAMZ,EAAAA,EAAAA,KAAI,GACVgB,OAAQ,KACR3B,QAAQ0B,EAAAA,EAAAA,IAAS,MAGbb,EAAcpB,IAClBM,EAAG4B,OAASlC,EAAKmC,IAAI,EAGjBb,EAAcA,OAEdE,EAAaA,KACjBlB,EAAGwB,MAAO,CAAK,EAGXJ,EAAgBU,IAChBA,GAAOA,EAAMC,iBACjB/B,EAAGwB,MAAO,EAEV,MAAMQ,EAAYN,EAAUO,MAC5BD,EAAUE,YAAYJ,EAAM,EAGxBR,EAAgBQ,IAChBA,GAAOA,EAAMC,iBAEjB,MAAMC,EAAYN,EAAUO,MAEtBL,EAAS5B,EAAG4B,OAElBA,EAAOO,OAEP,MAAM,YAAEC,GAAgBR,EAAOS,IACzBC,EAASV,EAAOW,UAEtBvC,EAAGC,OAAOuC,KAAK,CACbhC,IAAK8B,EACLjC,MAAO+B,EAAY/B,MACnBC,OAAQ8B,EAAY9B,SAGtB0B,EAAUE,aAAa,EAGnBtC,EAAiBkC,IACjBA,GAAOA,EAAMC,iBAEjB/B,EAAGwB,MAAO,EAEV,MAAMQ,EAAYN,EAAUO,MAC5BD,EAAUS,aAAaX,EAAM,EAOzB1B,EAAgB0B,IAChBA,GAAOA,EAAMC,iBAGjB,MAAMW,EAASZ,EAAMY,OAErB,GAAqC,WAAjCA,EAAOC,QAAQC,cAA4B,CAC7C,MAAMC,EAAQH,EAAOI,cAErBD,EAAME,UAAUC,OAAO,SACzB,KAAO,CACL,MAAMC,EAAUP,EACVG,EAAQI,EAAQC,cAAc,yBAEhCL,EAEFA,EAAME,UAAUC,OAAO,UAGvBN,EAAOK,UAAUC,OAAO,SAE5B,GAGF,MAAO,CACLtB,YAEA1B,KAEAc,aACAE,cACAE,aACAE,eACAE,eACA1B,gBAEAQ,eAEJ,EAEA,OAAe+C,EAAAA,EAAAA,IAAgB,CAC7BC,KAAM,eACNC,WAAY,CAAEC,WAAUA,EAAAA,YACxB7B,U,QCxLF,MAAM8B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://video-capture-demo/./src/components/PInputForm.vue","webpack://video-capture-demo/./src/components/PInputForm.vue?9b9e"],"sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <form>\n      <div>\n        <div class=\"\">\n          <button class=\"btn btn-secondary\" @click=\"doClickCamera\">\n            Camera\n          </button>\n        </div>\n\n        <div class=\"row row-cols-auto\" style=\"overflow-x: auto\">\n          <template v-for=\"(image, idx) in ui.images\" :key=\"idx\">\n            <div class=\"col\">\n              <div\n                class=\"photo-preview\"\n                @click=\"doClickPhoto\"\n                :data-idx=\"idx\"\n                :data-width=\"image.width\"\n                :data-height=\"image.height\"\n                :style=\"`background-image:url(${image.src})`\"\n              >\n                <div\n                  class=\"photo-show d-none\"\n                  :style=\"`background-image:url(${image.src}); width:${image.width}px; height:${image.height}px;`\"\n                ></div>\n              </div>\n              <div>{{ `${image.width} * ${image.height}` }}</div>\n            </div>\n          </template>\n        </div>\n      </div>\n\n      <PCameraVue\n        ref=\"refCamera\"\n        v-show=\"ui.show\"\n        @init=\"emitedInit\"\n        @pause=\"emitedPause\"\n        @stop=\"emitedStop\"\n      >\n        <template v-slot:close-button>\n          <button class=\"nav-link\" @click=\"doClickClose\">\n            <i class=\"bi bi-arrow-left\"></i>\n          </button>\n        </template>\n\n        <template v-slot:start-button><span /></template>\n\n        <template v-slot:pause-button>\n          <button class=\"btn btn-danger btn-lg\" @click=\"doClickPause\">\n            <i class=\"bi bi-stop-circle fs-1\"></i>\n          </button>\n        </template>\n\n        <template v-slot:stop-button><span /></template>\n      </PCameraVue>\n    </form>\n  </div>\n</template>\n\n<style scoped>\n.photo-preview {\n  display: inline-block;\n  min-width: 64px;\n  min-height: 64px;\n  max-width: 100vw;\n  max-height: 100vh;\n  cursor: pointer;\n  background-image: none;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n}\n.photo-show {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n</style>\n\n<script>\nimport { defineComponent } from \"vue\";\nimport { ref, reactive } from \"vue\";\nimport PCameraVue from \"./PCamera\";\n//import imageCompression from \"browser-image-compression\";\n\nconst setup = function () {\n  //const refImg = ref();\n  const refCamera = ref();\n\n  const ui = reactive({\n    show: ref(false),\n    camera: null,\n    images: reactive([]),\n  });\n\n  const emitedInit = (args) => {\n    ui.camera = args.data;\n  };\n\n  const emitedPause = () => {};\n\n  const emitedStop = () => {\n    ui.show = false;\n  };\n\n  const doClickClose = (event) => {\n    if (event) event.preventDefault();\n    ui.show = false;\n\n    const component = refCamera.value;\n    component.doClickStop(event);\n  };\n\n  const doClickPause = (event) => {\n    if (event) event.preventDefault();\n\n    const component = refCamera.value;\n\n    const camera = ui.camera;\n\n    camera.snap();\n\n    const { imageBuffer } = camera.DOM;\n    const base64 = camera.dataURL();\n\n    ui.images.push({\n      src: base64,\n      width: imageBuffer.width,\n      height: imageBuffer.height,\n    });\n\n    component.doClickStop();\n  };\n\n  const doClickCamera = (event) => {\n    if (event) event.preventDefault();\n\n    ui.show = true;\n\n    const component = refCamera.value;\n    component.doClickStart(event);\n  };\n\n  /**\n   *\n   * @param {MouseEvent} event\n   */\n  const doClickPhoto = (event) => {\n    if (event) event.preventDefault();\n\n    /** @type {HTMLElement} */\n    const target = event.target;\n\n    if (target.tagName.toLowerCase() === \"button\") {\n      const photo = target.parentElement;\n\n      photo.classList.toggle(\"d-none\");\n    } else {\n      const preview = target;\n      const photo = preview.querySelector(\":scope>div.photo-show\");\n\n      if (photo) {\n        // click preview\n        photo.classList.toggle(\"d-none\");\n      } else {\n        // photo\n        target.classList.toggle(\"d-none\");\n      }\n    }\n  };\n\n  return {\n    refCamera,\n\n    ui,\n\n    emitedInit,\n    emitedPause,\n    emitedStop,\n    doClickClose,\n    doClickPause,\n    doClickCamera,\n\n    doClickPhoto,\n  };\n};\n\nexport default defineComponent({\n  name: \"p-input-form\",\n  components: { PCameraVue },\n  setup,\n});\n</script>\n","import { render } from \"./PInputForm.vue?vue&type=template&id=a079a68c&scoped=true\"\nimport script from \"./PInputForm.vue?vue&type=script&lang=js\"\nexport * from \"./PInputForm.vue?vue&type=script&lang=js\"\n\nimport \"./PInputForm.vue?vue&type=style&index=0&id=a079a68c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a079a68c\"]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","_hoisted_5","_hoisted_8","_createElementBlock","_hoisted_1","_hoisted_2","onClick","_cache","args","_ctx","doClickCamera","_hoisted_3","_Fragment","_renderList","ui","images","image","idx","doClickPhoto","width","height","_normalizeStyle","src","_toDisplayString","_createVNode","_component_PCameraVue","ref","onInit","emitedInit","onPause","emitedPause","onStop","emitedStop","_withCtx","doClickClose","_hoisted_7","doClickPause","_hoisted_10","show","setup","refCamera","reactive","camera","data","event","preventDefault","component","value","doClickStop","snap","imageBuffer","DOM","base64","dataURL","push","doClickStart","target","tagName","toLowerCase","photo","parentElement","classList","toggle","preview","querySelector","defineComponent","name","components","PCameraVue","__exports__","render"],"sourceRoot":""}