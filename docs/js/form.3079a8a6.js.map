{"version":3,"file":"js/form.3079a8a6.js","mappings":"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","sources":["webpack://input-file-capture-demo/./src/components/PInputForm.vue","webpack://input-file-capture-demo/./src/components/PInputForm.vue?9b9e"],"sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <form>\n      <!-- video canvas -->\n      <div>\n        <div>\n          <button class=\"btn btn-secondary\" @click=\"doClickCamera\">\n            Camera\n          </button>\n        </div>\n        <div class=\"d-flex\" style=\"overflow-y: auto\">\n          <template v-for=\"(image, idx) in ui.images\" :key=\"idx\">\n            <div>\n              <div\n                class=\"photo-preview\"\n                @click=\"doClickPhoto\"\n                :data-idx=\"idx\"\n                :data-width=\"image.width\"\n                :data-height=\"image.height\"\n                :style=\"`background-image:url(${image.src})`\"\n              ></div>\n              <div>{{ `${image.width} * ${image.height}` }}</div>\n            </div>\n          </template>\n        </div>\n      </div>\n\n      <PCameraVue\n        ref=\"refCamera\"\n        v-show=\"ui.show\"\n        @init=\"emitedInit\"\n        @pause=\"emitedPause\"\n        @stop=\"emitedStop\"\n      >\n        <template v-slot:close-button>\n          <button class=\"nav-link\" @click=\"doClickClose\">\n            <i class=\"bi bi-arrow-left\"></i>\n          </button>\n        </template>\n\n        <template v-slot:start-button><span /></template>\n\n        <template v-slot:pause-button>\n          <button class=\"btn btn-danger btn-lg\" @click=\"doClickPause\">\n            <i class=\"bi bi-stop-circle fs-1\"></i>\n          </button>\n        </template>\n\n        <template v-slot:stop-button><span /></template>\n      </PCameraVue>\n    </form>\n  </div>\n</template>\n\n<style scoped>\n.photo-preview {\n  display: inline-block;\n  min-width: 100px;\n  min-height: 100px;\n  max-width: 100vw;\n  max-height: 100vh;\n  cursor: pointer;\n  background-image: none;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n}\n.photo-show {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n</style>\n\n<script>\nimport { defineComponent } from \"vue\";\nimport { ref, reactive } from \"vue\";\nimport PCameraVue from \"./PCamera\";\n//import imageCompression from \"browser-image-compression\";\n\nconst setup = function () {\n  //const refImg = ref();\n  const refCamera = ref();\n\n  const ui = reactive({\n    show: false,\n    camera: null,\n    images: reactive([]),\n  });\n\n  const emitedInit = (args) => {\n    ui.camera = args.data;\n  };\n\n  const emitedPause = () => {};\n\n  const emitedStop = () => {\n    ui.show = false;\n  };\n\n  const doClickClose = (event) => {\n    if (event) event.preventDefault();\n    ui.show = false;\n    refCamera.value.stop();\n  };\n\n  const doClickPause = (event) => {\n    if (event) event.preventDefault();\n\n    const component = refCamera.value;\n\n    component.pause().then(() => {\n      const camera = ui.camera;\n      const { imageBuffer } = camera.DOM;\n\n      camera.snap().then((base64) => {\n        //const div = document.querySelector(\"div.photo-preview\");\n\n        ui.images.push({\n          src: base64,\n          width: imageBuffer.width,\n          height: imageBuffer.height,\n        });\n      });\n\n      component.stop();\n    });\n  };\n\n  const doClickCamera = (event) => {\n    if (event) event.preventDefault();\n\n    ui.show = true;\n    refCamera.value.start();\n  };\n\n  /**\n   *\n   * @param {MouseEvent} event\n   */\n  const doClickPhoto = (event) => {\n    if (event) event.preventDefault();\n\n    /** @type {HTMLDivElement} */\n    const div = event.target;\n\n    if (div.classList.toggle(\"photo-show\") === true) {\n      //add\n      div.style.width = `${div.dataset.width}px`;\n      div.style.height = `${div.dataset.height}px`;\n    } else {\n      //remove\n      //add\n      div.style.width = null;\n      div.style.height = null;\n    }\n  };\n  return {\n    refCamera,\n\n    ui,\n\n    emitedInit,\n    emitedPause,\n    emitedStop,\n    doClickClose,\n    doClickPause,\n    doClickCamera,\n\n    doClickPhoto,\n  };\n};\n\nexport default defineComponent({\n  name: \"p-input-form\",\n  components: { PCameraVue },\n  setup,\n});\n</script>\n","import { render } from \"./PInputForm.vue?vue&type=template&id=2793720b&scoped=true\"\nimport script from \"./PInputForm.vue?vue&type=script&lang=js\"\nexport * from \"./PInputForm.vue?vue&type=script&lang=js\"\n\nimport \"./PInputForm.vue?vue&type=style&index=0&id=2793720b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2793720b\"]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","_hoisted_4","_hoisted_7","_createElementBlock","_hoisted_1","onClick","_cache","args","_ctx","doClickCamera","_hoisted_2","_Fragment","_renderList","ui","images","image","idx","key","doClickPhoto","width","height","_normalizeStyle","src","_toDisplayString","_createVNode","_component_PCameraVue","ref","onInit","emitedInit","onPause","emitedPause","onStop","emitedStop","_withCtx","doClickClose","_hoisted_6","doClickPause","_hoisted_9","show","setup","refCamera","reactive","camera","data","event","preventDefault","value","stop","component","pause","then","imageBuffer","DOM","snap","base64","push","start","div","target","classList","toggle","dataset","defineComponent","name","components","PCameraVue","__exports__","render"],"sourceRoot":""}