(self["webpackChunkinput_file_capture_demo"]=self["webpackChunkinput_file_capture_demo"]||[]).push([[85],{3278:function(e){const t={DOM:{target:".viewport"},CONSTRAINS:{video:{width:1280,height:720}}};e.exports=(e=t.DOM.target,a=t.CONSTRAINS)=>{const n={target:e,viewport:null,video:null,canvas:null},r=e=>{let t;t=e?"string"===typeof e?document.querySelector(e):e:document.querySelector(".viewport");let a=t.querySelector("canvas");a||(a=t.createElement("canvas"),t.appendChild(a));let r=t.querySelector("video");r||(r=document.createElement("video"),t.appendChild(r)),n.viewport=t,n.canvas=a,n.video=r},s={stream:null,videoTrack:null},o=async e=>{const t=await navigator.mediaDevices.getUserMedia(e);s.stream=t;const{video:a,canvas:r}=n;return a.srcObject=t,t.getVideoTracks().forEach((e=>{s.videoTrack=e;const t=e.getConstraints();r.width=t.width,r.height=t.height})),t},c=(e,t)=>{const a=t.getContext("2d"),n={w:Math.floor(t.width),h:Math.floor(t.height)};a.clearRect(0,0,n.w,n.h),a.drawImage(e,0,0,n.w,n.h)},i={pause:!1},u=async()=>{let{stream:e}=s;return e||(e=await o(a)),e&&(i.pause=!1,e.getVideoTracks().forEach((e=>{e.enabled=!0})),requestAnimationFrame(d)),s.stream},l=async()=>{try{const{stream:e}=s;return e&&(i.pause=!0,e.getVideoTracks().forEach((e=>{e.enabled=!1}))),Promise.resolve(e)}catch(e){return Promise.reject(e)}},p=async()=>{try{const{stream:e}=s;return e&&(e.getTracks().forEach((e=>{e.enabled=!0,e.stop()})),s.stream=null,i.pause=!1),Promise.resolve(e)}catch(e){return Promise.reject(e)}},d=()=>{if(!i.pause){const{video:e,canvas:t}=n;c(e,t),setTimeout(requestAnimationFrame(d),1e3/30)}};return{async init(){return new Promise((t=>(r(e),t(this))))},async start(){return await u()},async pause(){return await l()},async stop(){return await p()}}}},6572:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var n=a(3396);const r=e=>((0,n.dD)("data-v-2b17f998"),e=e(),(0,n.Cn)(),e),s={class:"wapper"},o=r((()=>(0,n._)("section",{class:"viewport"},[(0,n._)("canvas"),(0,n._)("video",{autoplay:"",playsinline:""})],-1))),c={class:"fixed-bottom"};function i(e,t){return(0,n.wg)(),(0,n.iD)("main",s,[o,(0,n._)("section",c,[(0,n._)("button",{onClick:t[0]||(t[0]=(...t)=>e.start&&e.start(...t))},"start"),(0,n._)("button",{onClick:t[1]||(t[1]=(...t)=>e.pause&&e.pause(...t))},"pause"),(0,n._)("button",{onClick:t[2]||(t[2]=(...t)=>e.stop&&e.stop(...t))},"stop")])])}var u=a(4870),l=a(3278),p=a.n(l);const d=()=>{const e=(0,u.iH)({instance:null}),t=()=>{const t=e.value.instance;t.start()},a=()=>{const t=e.value.instance;t.pause()},r=()=>{const t=e.value.instance;t.stop()};return(0,n.bv)((()=>{const t=e.value.instance=p()(".viewport",{video:{width:1200,height:720}});t.init().then((e=>{e.start()}))})),{start:t,pause:a,stop:r}};var v=(0,n.aZ)({name:"p-camera",setup:d}),h=a(89);const m=(0,h.Z)(v,[["render",i],["__scopeId","data-v-2b17f998"]]);var w=m}}]);
//# sourceMappingURL=camera.724d933b.js.map