{"version":3,"file":"js/form.bfa87346.js","mappings":"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","sources":["webpack://video-capture-demo/./src/components/PInputForm.vue","webpack://video-capture-demo/./src/components/PInputForm.vue?9b9e"],"sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <form>\n      <div>\n        <div class=\"\">\n          <button class=\"btn btn-secondary\" @click=\"doClickCamera\">\n            Camera\n          </button>\n        </div>\n\n        <div class=\"row row-cols-auto\" style=\"overflow-x: auto\">\n          <template v-for=\"(image, idx) in ui.images\" :key=\"idx\">\n            <div class=\"col\">\n              <!-- preview -->\n              <div\n                class=\"photo-preview\"\n                @click=\"doClickPhoto\"\n                :data-idx=\"idx\"\n                :data-width=\"image.width\"\n                :data-height=\"image.height\"\n                :style=\"`background-image:url(${image.src})`\"\n              ></div>\n              <div>{{ `${image.width} * ${image.height}` }}</div>\n              <!-- image -->\n              <div class=\"photo-show d-none\" @click=\"doClickPhoto\">\n                <div class=\"photo-wapper\">\n                  <img\n                    class=\"photo-image\"\n                    :src=\"`${image.src}`\"\n                    :width=\"image.width\"\n                    :height=\"`${image.height}`\"\n                  />\n                </div>\n              </div>\n            </div>\n          </template>\n        </div>\n      </div>\n\n      <PCameraVue\n        ref=\"refCamera\"\n        v-show=\"ui.show\"\n        @init=\"emitedInit\"\n        @pause=\"emitedPause\"\n        @stop=\"emitedStop\"\n      >\n        <template v-slot:close-button>\n          <button class=\"nav-link\" @click=\"doClickClose\">\n            <i class=\"bi bi-arrow-left\"></i>\n          </button>\n        </template>\n\n        <template v-slot:start-button><span /></template>\n\n        <template v-slot:pause-button>\n          <button class=\"btn btn-danger btn-lg\" @click=\"doClickPause\">\n            <i class=\"bi bi-stop-circle fs-1\"></i>\n          </button>\n        </template>\n\n        <template v-slot:stop-button><span /></template>\n      </PCameraVue>\n    </form>\n  </div>\n</template>\n\n<style scoped>\n.photo-preview {\n  display: inline-block;\n  min-width: 64px;\n  min-height: 64px;\n  max-width: 100vw;\n  max-height: 100vh;\n  cursor: pointer;\n  background-image: none;\n  background-repeat: no-repeat;\n  background-size: cover;\n  background-position: center;\n}\n.photo-show {\n  position: absolute;\n  top: 0;\n  left: 0;\n  max-width: 100vw;\n  max-height: 100vh;\n  width: 100%;\n  height: auto;\n  cursor: pointer;\n}\n\n.photo-wapper {\n  position: relative;\n  display: inline-block;\n  max-width: 100%;\n  max-height: 100%;\n  width: auto;\n  height: 100%;\n  aspect-ratio: 16/9;\n}\n.photo-image {\n  /* display: block;\n  margin: auto;\n  width: 100%;\n  height: 100%; */\n  display: block;\n  margin: auto;\n  width: 100%;\n  height: 100%;\n}\n</style>\n\n<script>\nimport { defineComponent } from \"vue\";\nimport { ref, reactive } from \"vue\";\nimport PCameraVue from \"./PCamera\";\n//import imageCompression from \"browser-image-compression\";\n\nconst setup = function () {\n  //const refImg = ref();\n  const refCamera = ref();\n\n  const ui = reactive({\n    show: ref(false),\n    camera: null,\n    images: reactive([]),\n  });\n\n  const emitedInit = (args) => {\n    ui.camera = args.data;\n  };\n\n  const emitedPause = () => {};\n\n  const emitedStop = () => {\n    ui.show = false;\n  };\n\n  const doClickClose = (event) => {\n    if (event) event.preventDefault();\n    ui.show = false;\n\n    const component = refCamera.value;\n    component.doClickStop(event);\n  };\n\n  const doClickPause = (event) => {\n    if (event) event.preventDefault();\n\n    const component = refCamera.value;\n\n    component.setState(\"pausing\");\n\n    const camera = ui.camera;\n\n    camera.snap();\n\n    const { imageBuffer } = camera.DOM;\n    const base64 = camera.dataURL();\n\n    ui.images.push({\n      src: base64,\n      width: imageBuffer.width,\n      height: imageBuffer.height,\n    });\n\n    component.doClickStop();\n  };\n\n  const doClickCamera = (event) => {\n    if (event) event.preventDefault();\n\n    ui.show = true;\n\n    const component = refCamera.value;\n    component.doClickStart(event);\n  };\n\n  /**\n   *\n   * @param {MouseEvent} event\n   */\n  const doClickPhoto = (event) => {\n    if (event) event.preventDefault();\n\n    /** @type {HTMLElement} */\n    const target = event.currentTarget;\n\n    const col = target.parentElement;\n\n    //const preview = target;\n    const photo = col.querySelector(\":scope>div.photo-show\");\n\n    photo.classList.toggle(\"d-none\");\n  };\n\n  return {\n    refCamera,\n\n    ui,\n\n    emitedInit,\n    emitedPause,\n    emitedStop,\n    doClickClose,\n    doClickPause,\n    doClickCamera,\n\n    doClickPhoto,\n  };\n};\n\nexport default defineComponent({\n  name: \"p-input-form\",\n  components: { PCameraVue },\n  setup,\n});\n</script>\n","import { render } from \"./PInputForm.vue?vue&type=template&id=a1cbe668&scoped=true\"\nimport script from \"./PInputForm.vue?vue&type=script&lang=js\"\nexport * from \"./PInputForm.vue?vue&type=script&lang=js\"\n\nimport \"./PInputForm.vue?vue&type=style&index=0&id=a1cbe668&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a1cbe668\"]])\n\nexport default __exports__"],"names":["class","style","_createElementVNode","_hoisted_7","_hoisted_10","_createElementBlock","_hoisted_1","_hoisted_2","onClick","_cache","args","_ctx","doClickCamera","_hoisted_3","_Fragment","_renderList","ui","images","image","idx","doClickPhoto","width","height","_normalizeStyle","src","_toDisplayString","_hoisted_5","_createVNode","_component_PCameraVue","ref","onInit","emitedInit","onPause","emitedPause","onStop","emitedStop","_withCtx","doClickClose","_hoisted_9","doClickPause","_hoisted_12","show","setup","refCamera","reactive","camera","data","event","preventDefault","component","value","doClickStop","setState","snap","imageBuffer","DOM","base64","dataURL","push","doClickStart","target","currentTarget","col","parentElement","photo","querySelector","classList","toggle","defineComponent","name","components","PCameraVue","__exports__","render"],"sourceRoot":""}